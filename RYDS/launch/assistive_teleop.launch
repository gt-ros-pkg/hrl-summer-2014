<launch>
  <include file="$(find pr2_machine)/$(env ROBOT).machine" />

  <!-- Rosbridge, Rosapi, Webserver (roswww), and mjpeg_server -->
  <node name="rosbridge" pkg="rosbridge_server" type="rosbridge.py" output="screen">
      <param name="port" type="int" value="9091" />
  </node>
  
  <node name="rosapi" pkg="rosapi" type="rosapi.py" output="screen"/>

  <rosparam> 'http/default': 8000 </rosparam>
  <node name="roswww" pkg="roswww" type="webserver.py" output="screen"/>

  <node pkg="mjpeg_server" type="mjpeg_server"  name="mjpeg_server" output="screen">
      <param name="port" type="int" value="8080" />
  </node>

  <!-- Throttling nodes for robot state -->
  <node name="torso_state_throttle" pkg="topic_tools" type="throttle"
        args="messages /torso_controller/state 2 /torso_controller/state_throttled" />

  <node name="head_state_throttle" pkg="topic_tools" type="throttle"
        args="messages /head_traj_controller/state 4 /head_traj_controller/state_throttled" />

  <node name="r_gripper_state_throttle" pkg="topic_tools" type="throttle"
        args="messages /r_gripper_controller/state 1 /r_gripper_controller/state_throttled" />

  <node name="l_gripper_state_throttle" pkg="topic_tools" type="throttle" 
        args="messages /l_gripper_controller/state 1 /l_gripper_controller/state_throttled" />

</launch>
